@model ResourceManagement.Models.RMA_EmployeeModel

@{
    ViewBag.Title = "Dashboard";
    var imagePath = "";

    imagePath = "/Assets/EmployeeImagesPNG/" + @Model.AMBC_Active_Emp_view.Employee_ID + ".png";
}

@{
    Html.RenderPartial("_MenuNavigation", Model);
}

<style>
    .custom-container-fullwidth {
        width: 100% !important;
        padding-right: 15px !important;
        padding-left: 15px !important;
        margin-right: auto !important;
        margin-left: auto !important;
    }

    body {
        color: #23366f;
    }
</style>

<div class="custom-container-fullwidth100" style="background-color: #dae2f4 !important; margin-top: -20px !important; height: 375px !important ">
    <div class="row">

        <div class="col-lg-8" style="margin-top: 85px; margin-left: 100px">
            <h2 style="font-size: 3rem">
                Your collaboration is immensely valued and greatly appreciated.
            </h2>
            <div style="margin-left: 100px">
                <h3 style="font-weight: bold; text-decoration: underline;" class="line-height"><span style="color: red">Mandatory</span> Activities:</h3>
                <h2 class="line-height"><b>Check-In/Check-Out</b> - Daily activity</h2>
                <h2 class="line-height"><a href="/timesheet"><b>Timesheet</b></a> - Weekly Activity</h2>
                <h2 class="line-height"><a href="/timesheet"><b>Status Report</b></a> - Monthly Activity</h2>
            </div>

        </div>

        <div class="col-lg-3">
            <img alt="" src="~/Assets/mandatory-act.png" class="card-img-top img-fluid rounded-circle" style="height: 330px !important; width: 340px !important; margin-top: 20px !important; margin-left: -75px !important">
        </div>
    </div>

</div>

<div class="custom-container-fullwidth100" style="background-color: #91bfe3 !important; margin-top: -20px !important; height: 200px !important ">
    <div class="row">
        <div class="col-lg-3">
            <img alt="" src="@imagePath" width="250" class="card-img-top img-fluid rounded-circle img-fluid-dashboard" style=" margin-left: 200px; margin-top: 45px;">
        </div>
        <div class="col-lg-8" style="margin-top: 85px">
            @{
                var showCheckIn = Model.signInOutInfo == null ? "show" : "hide";
                var showCheckOut = Model.signInOutInfo != null && Model.signInOutInfo.Signout_Time == null ? "show" : "hide";
                var showLabel = Model.signInOutInfo != null && Model.signInOutInfo.Signout_Time != null && Model.signInOutInfo.Signin_Time != null ? "show" : "hide";
            }

            <button disabled type="submit" class="signin custom-button @showCheckIn" style="width: 100px; border-radius: 10px; background-color: #23366f !important "><b style="font-size: medium;">Check-In</b></button>
            <button disabled type="submit" class="signout custom-button  @showCheckOut" style="width: 100px; border-radius: 10px; background-color: #23366f !important "><b style="font-size: medium; ">Check-Out</b></button>
            <label class="@showLabel done-forday"><b style="font-size:medium">See you tomorrow!</b></label>
            <br />
            <h3><span class="title-2"><b>DO YOUR PART,</b> Kindly proceed with the check-in process. Our admin team will record your attendance. Thank you!</span></h3>
        </div>
    </div>

</div>

@*<div class="container custom-container-fullwidth">
    <div class="row">
        <div class="col-lg-8" style="margin-left: -50px !important">
            <h2 class="" style="margin-top: 150px !important"><b style="color:orange">WHAT</b> <b style="color:navy">WE</b> <b style="color: darkcyan">DO</b></h2>

            <h3 style="font-size: 3.75rem !important"><span class="title-2">We help you solve your greatest business challenges.</span></h3>
        </div>
        <div class="col-lg-3">

            <img src="~/Assets/test.png" width="500" />
        </div>
    </div>

</div>*@


@*<div class="col-sm ">
        <div class="card dashboard-zoom" style="width: 18rem; height:285px">
            <img src="@imagePath" class="card-img-top img-fluid rounded-circle img-fluid-dashboard" alt="..." height="120">
            <div class="card-body">
                <p class="card-text" style="width: 158px">
                    DO YOUR PART, Please Check-In. Admin team will mark your attendence. Thanks you for understanding.
                </p>

            </div>
            <div class="modal-footer header-nav-modalfooter">
                @{
                    var showCheckIn = Model.signInOutInfo == null ? "show" : "hide";
                    var showCheckOut = Model.signInOutInfo != null && Model.signInOutInfo.Signout_Time == null ? "show" : "hide";
                    var showLabel = Model.signInOutInfo != null && Model.signInOutInfo.Signout_Time != null && Model.signInOutInfo.Signin_Time != null ? "show" : "hide";
                }

                <button type="submit" class="signin btn-info @showCheckIn" style="width:100px; border-radius:10px;"><b>Check-In</b></button>
                <button type="submit" class="signout btn-info  @showCheckOut" style="width:100px; border-radius:10px"><b>Check-Out</b></button>
                <label class="@showLabel done-forday">See you tomorrow!</label>
            </div>
        </div>
    </div>*@






<div class="modal message-confirm-popup" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-information-custommessage">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" fill="#fff" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve" style="margin-left: 190px; padding-top: 30px; margin-bottom: 30px;" width="50px">
<g id="Info-mark">
                <path d="M38.5351982,47.6064987H34.455101V28.4473c0-0.5527-0.4473-1-1-1h-4.5204945c-0.5523071,0-1,0.4473-1,1s0.4476929,1,1,1
		h3.5204945v18.1591988h-5.1216011c-0.5522003,0-1,0.4472008-1,1c0,0.5527,0.4477997,1,1,1h11.2016983c0.5527,0,1-0.4473,1-1
		C39.5351982,48.0536995,39.0878983,47.6064987,38.5351982,47.6064987z" />
                <circle cx="32" cy="18" r="3" />
                <path d="M32,0c-17.6730995,0-32,14.3268995-32,32s14.3268995,32,32,32s32-14.3269005,32-32S49.6730995,0,32,0z M32,62
		c-16.542099,0-30-13.457901-30-30c0-16.5419998,13.4578991-30,30-30s30,13.4580002,30,30C62,48.542099,48.542099,62,32,62z" />
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <h2 class="modal-body-custom-information">
                    Hey @Model.AMBC_Active_Emp_view.Employee_Name
                    <br />
                    <br />
                    Thank you for check-Out.
                    <br />
                    Have a good day. See you tomorrow!
                </h2>
            </div>

            <div class="">
                <button type="button" class="btn btn-lg modal-information-popup-btn" data-dismiss="modal"><b style="color: #2167ae">Okay</b></button>
            </div>
        </div>
    </div>
</div>

<div class="modal message-success-popup" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-success-custommessage">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" fill="#fff" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 52 52" style="enable-background: new 0 0 52 52; margin-left: 190px; padding-top: 30px; margin-bottom: 30px;" xml:space="preserve" width="50px">
                <g>
                <path d="M26,0C11.664,0,0,11.663,0,26s11.664,26,26,26s26-11.663,26-26S40.336,0,26,0z M26,50C12.767,50,2,39.233,2,26
		S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z" />
                <path d="M38.252,15.336l-15.369,17.29l-9.259-7.407c-0.43-0.345-1.061-0.274-1.405,0.156c-0.345,0.432-0.275,1.061,0.156,1.406
		l10,8C22.559,34.928,22.78,35,23,35c0.276,0,0.551-0.114,0.748-0.336l16-18c0.367-0.412,0.33-1.045-0.083-1.411
		C39.251,14.885,38.62,14.922,38.252,15.336z" />
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                <g>
                                </g>
                                </svg>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <h2 class="modal-body-custom-success">
                    Hey @Model.AMBC_Active_Emp_view.Employee_Name
                    <br />
                    <br />
                    Thank you for check-In.
                    Have a good day!
                </h2>
            </div>

            <div class="">
                <button type="button" class="btn btn-lg modal-success-popup-btn" data-dismiss="modal">Okay</button>
            </div>
        </div>
    </div>
</div>

    </div>
</div>


<div class="modal" tabindex="-1" role="dialog" id="modal-warning-message-popup">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" fill="#fff" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 52 52" style="enable-background: new 0 0 52 52; margin-left: 80px; padding-top: 20px; margin-bottom: 20px; width: 50px" xml:space="preserve">
<g>
                <path d="M26,0C11.664,0,0,11.663,0,26s11.664,26,26,26s26-11.663,26-26S40.336,0,26,0z M26,50C12.767,50,2,39.233,2,26
		S12.767,2,26,2s24,10.767,24,24S39.233,50,26,50z" />
                <path d="M26,10c-0.552,0-1,0.447-1,1v22c0,0.553,0.448,1,1,1s1-0.447,1-1V11C27,10.447,26.552,10,26,10z" />
                <path d="M26,37c-0.552,0-1,0.447-1,1v2c0,0.553,0.448,1,1,1s1-0.447,1-1v-2C27,37.447,26.552,37,26,37z" />
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
                <div style="height: 60px; background-color: #92d0e8"></div>
            </div>
            <div class="modal-body text-center">
                <h2 class="modal-body-custom-success">
                    Hey @Model.AMBC_Active_Emp_view.Employee_Name
                    <br />
                    <br />
                    You have applied Leave or Holiday today so you cannot check-In today.
                    Have a good holiday!
                </h2>
            </div>
            <div class="">
                <button type="button" class="btn btn-secondary modal-warning-popup-btn" data-dismiss="modal"><b style="font-size:medium">Close</b></button>
            </div>
        </div>
    </div>
</div>

<script>
    jQuery(".signin").click(function () {
        jQuery.ajax({
            type: "POST",
            url: "/signin",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data.jsonResponse.StatusCode == 200) {
                    jQuery('.signin').hide();
                    jQuery('.signin').removeClass('show');
                    jQuery('.signout').show();
                    jQuery('.signout').removeClass('hide');
                    $('.message-success-popup').modal('show');

                    var signInAndOutEmailModel = {
                        empname: data.empname,
                        empemailid: data.empemailid,
                        type: data.type
                    }

                    jQuery.ajax({
                        type: "POST",
                        url: "/SignInAndOutEmail",
                        data: JSON.stringify({ signInAndOutEmailData: signInAndOutEmailModel }),
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            console.log("Check-In Email Sent Successfully");
                        }
                    });
                }
                else {
                    if (data.jsonResponse.StatusCode == 500) {
                        $('#modal-warning-message-popup').modal('show');
                    }
                    else {
                        jQuery('.signin').show();
                        jQuery('.signin').removeClass('hide');
                        jQuery('.signout').hide();
                        jQuery('.signout').removeClass('show');
                    }
                }
            }
        });
    });

    jQuery(".signout").click(function () {
        jQuery.ajax({
            type: "POST",
            url: "/signout",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data.jsonResponse.StatusCode == 200) {
                    jQuery('.done-forday').show();
                    jQuery('.done-forday').removeClass('hide');
                    jQuery('.signout').hide();
                    jQuery('.signout').removeClass('show');
                    jQuery('.signin').hide();
                    jQuery('.signin').removeClass('show');
                    $('.message-confirm-popup').modal('show');

                    var signInAndOutEmailModel = {
                        empname: data.empname,
                        empemailid: data.empemailid,
                        type: data.type
                    }

                    jQuery.ajax({
                        type: "POST",
                        url: "/SignInAndOutEmail",
                        data: JSON.stringify({ signInAndOutEmailData: signInAndOutEmailModel }),
                        contentType: 'application/json; charset=utf-8',
                        success: function (data) {
                            console.log("Check-Out Email Sent Successfully");
                        }
                    });
                }
                else {
                    jQuery('.signin').hide();
                    jQuery('.signin').removeClass('show');
                    jQuery('.signout').show();
                    jQuery('.signout').removeClass('hide');
                }
            }
        });
    });


    $('#layout-div').removeClass("custom-container-fullwidth").addClass("custom-container-fullwidth100");
</script>



